<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Photo to Scan Converter - Artha</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Your styles here (skipped for brevity) -->
</head>
<body>
  <!-- Your full HTML layout (skipped, already present in your original file) -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>
  <script>
    // Assume all canvas/image processing code is already here...

    downloadAllJpg.addEventListener('click', () => {
      const zip = new JSZip();
      canvases.forEach((canvas, index) => {
        const dataURL = canvas.toDataURL('image/jpeg', 1.0);
        const imgData = dataURL.split(',')[1];
        zip.file(`scan-${index + 1}.jpg`, imgData, { base64: true });
      });
      zip.generateAsync({ type: "blob" }).then(content => {
        const link = document.createElement('a');
        link.href = URL.createObjectURL(content);
        link.download = "scanned-images.zip";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      });
    });

    downloadPDF.addEventListener('click', async () => {
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF();
      canvases.forEach((canvas, i) => {
        const imgData = canvas.toDataURL('image/jpeg', 1.0);
        const width = pdf.internal.pageSize.getWidth();
        const height = pdf.internal.pageSize.getHeight();
        pdf.addImage(imgData, 'JPEG', 0, 0, width, height);
        if (i < canvases.length - 1) pdf.addPage();
      });
      const blob = pdf.output('blob');
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'scanned-pages.pdf';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });
  </script>
</body>
</html>
